CREATE TABLE USERS (
  USER_ID    INT PRIMARY KEY,
  USER_NAME VARCHAR(40) NOT NULL UNIQUE,
  PASSWORD VARCHAR(40) NOT NULL,
  FIRST_NAME    VARCHAR(12) NOT NULL,
  LAST_NAME     VARCHAR(30) NOT NULL,
  EMAIL VARCHAR(255) NOT NULL UNIQUE,
  ADDRESS VARCHAR(255),
  PHONE_NUMBER VARCHAR(10) NOT NULL 
);

CREATE TABLE PURCHASES (
  PURCHASE_ID INT PRIMARY KEY,
  USER_ID INT NOT NULL,
  TICKET_ID INT NOT NULL,
  ADDRESS_EDIT VARCHAR(255)
);

CREATE TABLE EVENTS (
  EVENT_ID    INT PRIMARY KEY,
  EVENT_NAME VARCHAR(30),
  EVENT_DESCRIPTION VARCHAR(255),
  LOCATION_ID INT NOT NULL,
  EVENT_DATE DATE NOT NULL,
  EVENT_START VARCHAR(255),
  EVENT_END VARCHAR(255)
);

CREATE TABLE TICKETS (
  TICKET_ID INT PRIMARY KEY,
  EVENT_ID INT NOT NULL,
  PRICE DECIMAL(8,2),
  NO_AVAILABLE_TICKETS INT
);

CREATE TABLE LOCATIONS (
  LOCATION_ID    INT PRIMARY KEY,
  STREET_ADDRESS VARCHAR(40),
  CITY           VARCHAR(30) NOT NULL
);

CREATE TABLE REVIEWS (
  REVIEW_ID INT AUTO_INCREMENT PRIMARY KEY NOT NULL, 
  EVENT_ID INT REFERENCES EVENTS (EVENT_ID),
  REVIEW_MESSAGE VARCHAR(255) NOT NULL
);

CREATE TABLE FEEDBACK (
  FEEDBACK_ID INT AUTO_INCREMENT PRIMARY KEY NOT NULL, 
  NAME VARCHAR(255) NOT NULL,
  MESSAGE VARCHAR(255) NOT NULL
);

ALTER TABLE USERS CHANGE USER_ID USER_ID INT AUTO_INCREMENT;
ALTER TABLE EVENTS  CHANGE EVENT_ID EVENT_ID INT AUTO_INCREMENT;
ALTER TABLE TICKETS CHANGE TICKET_ID TICKET_ID INT AUTO_INCREMENT;
ALTER TABLE LOCATIONS CHANGE LOCATION_ID LOCATION_ID INT AUTO_INCREMENT;
ALTER TABLE PURCHASES CHANGE PURCHASE PURCHASE_ID INT AUTO_INCREMENT;
ALTER TABLE TICKETS ADD COLUMN CATEGORY VARCHAR(255);

ALTER TABLE EVENTS ADD FOREIGN KEY (LOCATION_ID) REFERENCES LOCATIONS (LOCATION_ID);
ALTER TABLE TICKETS ADD FOREIGN KEY (EVENT_ID) REFERENCES EVENTS (EVENT_ID);
ALTER TABLE PURCHASES ADD FOREIGN KEY (USER_ID) REFERENCES USERS (USER_ID);
ALTER TABLE PURCHASES ADD FOREIGN KEY (TICKET_ID) REFERENCES TICKETS (TICKET_ID);

ALTER TABLE EVENTS ADD EVENT_IMAGE VARCHAR(256) NOT NULL
ALTER TABLE EVENTS ADD EVENT_CATEGORY VARCHAR(256) NOT NULL
ALTER TABLE REVIEWS ADD FOREIGN KEY (EVENT_ID) REFERENCES EVENTS (EVENT_ID)